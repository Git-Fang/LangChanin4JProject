server:
  port: 8000
  servlet:
    encoding:
      charset: utf-8
      force: true
      enabled: true
    context-parameters:
      tomcat-servlet:
        async-supported: true
  tomcat:
    connection-timeout: 180000

spring:
  application:
    name: RAGTranslationApplication
  web:
    timeout: 180s
  servlet:
    multipart:
      max-file-size: 20MB
      max-request-size: 100MB
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    name: defaultDataSource
    url: ${DB_URL:jdbc:mysql://localhost:3306/rag_translation?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:root}
  data:
    mongodb:
      uri: ${SPRING_DATA_MONGODB_URI:mongodb://localhost:27017/chat_db}

# Redis配置
  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}
    password: ${REDIS_PASSWORD:}
    timeout: 60000
    jedis:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0

mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    map-underscore-to-camel-case: true
  global-config:
    db-config:
      table-underline: true

ai:
  deepSeek:
    base-url: https://api.deepseek.com/v1
    model: deepseek-chat
    apiKey: ${DeepSeek_API_KEY}

  kimi:
    base-url: https://api.moonshot.cn/v1
    model: kimi-k2-turbo-preview
    apiKey: ${KIMI_API_KEY}

  embeddingStore:
    qdrant:
      collectionName: ragTranslation-1226
      host: ${QDRANT_HOST:localhost}
      port: ${QDRANT_PORT:6333}
      apiKey: ${QDRANT_API_KEY:}

  ollama:
    base-url: http://${OLLAMA_HOST:localhost}:${OLLAMA_PORT:11434}
    model: deepseek-r1:8b
    options:
      temperature: 0.7

  dashscope:
    apiKey: ${DASHSCOPE_API_KEY}
    model: qwen3-235b-a22b
    base-url: https://dashscope.aliyuncs.com/compatible-mode/v1

  mcp:
    baiduMap:
      apiKey: ${BAIDU_MAP_API_KEY}

# 日志配置
logging:
  level:
    root: INFO
    org.fb: DEBUG
    dev.langchain4j: DEBUG
    dev.langchain4j.mcp: DEBUG
    dev.langchain4j.model.chat: DEBUG
    dev.langchain4j.model.openai: DEBUG
    org.springframework.web: INFO
    org.springframework.ai: DEBUG
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n'
    file: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n'
  file:
    name: logs/application.log
    max-size: 100MB
    max-history: 7

# Spring Boot Actuator 配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
  health:
    defaults:
      enabled: true
    mongo:
      enabled: true

# 自定义应用配置
app:
  # 文件上传路径
  upload:
    path: /app/uploads

  # API调用超时配置
  api:
    timeout: 180s

  # RAG配置
  rag:
    max-results: 10
    min-score: 0.7