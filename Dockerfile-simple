# 简化版Dockerfile
FROM openjdk:17-jdk-slim

WORKDIR /app

# 先将整个项目复制进来
COPY . .

# 安装Maven
RUN apt-get update && apt-get install -y maven curl wget && rm -rf /var/lib/apt/lists/*

# 设置时区
ENV TZ=Asia/Shanghai

# 构建应用
RUN mvn clean package -DskipTests

# 运行JAR
CMD ["java", "-jar", "-Dspring.profiles.active=docker", "target/*.jar"]