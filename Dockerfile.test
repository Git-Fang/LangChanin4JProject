# 简化测试版本，跳过AI模型加载
FROM openjdk:17-jdk-alpine

WORKDIR /app

# 复制构建好的JAR
COPY target/*.jar app.jar

# 运行应用（使用本地IP和端口）
CMD ["java", "-Dspring.profiles.active=docker", "-Dserver.port=8000", "-jar", "app.jar", "--spring.main.lazy-initialization=true", "--spring.autoconfigure.exclude=dev.langchain4j.model.embedding.onnx.allminilml6v2.AllMiniLmL6V2EmbeddingModel"]

EXPOSE 8000